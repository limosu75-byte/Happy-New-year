<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ariki's Touch ğŸ’‹</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #2b0a0a; 
            --bg-light: #7a1a1a;
            --gold: #ffcf40;
            --glass: rgba(255, 255, 255, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: none; /* ç¦æ­¢é»˜è®¤ç¼©æ”¾ */ }

        body {
            background: radial-gradient(circle at center, var(--bg-light), var(--bg-deep));
            color: var(--gold);
            font-family: 'Noto Serif SC', serif;
            overflow: hidden; /* é”å®šå±å¹•ä¸æ»šåŠ¨ï¼Œä¸“å¿ƒç© */
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* é£˜è½è£…é¥° */
        .bg-pattern {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='25' font-size='20' fill='%23ffcf40' opacity='0.1'%3EğŸ§§%3C/text%3E%3C/svg%3E");
            opacity: 0.3; z-index: -1;
        }

        header { margin-top: 20px; text-align: center; z-index: 10; }
        h1 {
            font-family: 'Ma Shan Zheng', cursive;
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(255, 207, 64, 0.5);
            margin-bottom: 5px;
        }
        p { font-size: 0.9rem; opacity: 0.8; }

        /* ğŸ’‹ æ¸¸æˆ1ï¼šç‹‚å»åŒº (æ•´ä¸ªå±å¹•èƒŒæ™¯) */
        .kiss-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; cursor: pointer;
        }
        
        .kiss-mark {
            position: absolute; font-size: 2rem;
            pointer-events: none;
            animation: kissPop 0.5s ease-out forwards;
        }
        @keyframes kissPop {
            0% { transform: scale(0.5) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.5) rotate(-10deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 0.8; top: -=50px; }
        }

        /* ğŸ§§ æ¸¸æˆ2ï¼šåˆ®åˆ®ä¹å¡ç‰‡ */
        .scratch-container {
            margin-top: 20px;
            width: 300px;
            height: 150px;
            position: relative;
            z-index: 20; /* ä¿è¯åœ¨å»ä¸Šé¢ */
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 4px solid var(--gold);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            user-select: none;
        }

        /* è—åœ¨ä¸‹é¢çš„å†…å®¹ */
        .secret-content {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            color: #8a0000;
            padding: 10px;
            font-weight: bold;
        }
        .secret-icon { font-size: 3rem; margin-bottom: 5px; }
        .secret-text { font-size: 1.1rem; font-family: 'Ma Shan Zheng', cursive; }

        /* æ¶‚å±‚ç”»å¸ƒ */
        canvas {
            position: absolute;
            top: 0; left: 0;
            cursor: pointer;
            border-radius: 11px; /* é€‚é…è¾¹æ¡† */
        }

        /* åº•éƒ¨æ§åˆ¶æ  */
        .controls {
            z-index: 20;
            margin-top: auto;
            margin-bottom: 30px;
            text-align: center;
            background: rgba(0,0,0,0.5);
            padding: 15px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            border: 1px solid var(--gold);
        }
        
        .btn {
            background: var(--gold); color: #4a0000;
            border: none; padding: 10px 20px;
            font-family: 'Noto Serif SC', serif;
            font-weight: bold; border-radius: 30px;
            font-size: 1rem; cursor: pointer;
            margin: 0 5px;
        }
        .btn:active { transform: scale(0.95); }

        .score-display {
            font-size: 1.2rem; margin-bottom: 10px;
            font-family: 'Ma Shan Zheng', cursive;
        }

    </style>
</head>
<body>

    <div class="bg-pattern"></div>

    <header>
        <h1>æ–°æ˜¥è´´è´´å¤§ä¼š</h1>
        <p>1. ç‚¹å‡»ç©ºç™½å¤„ç‹‚å»ç‹ç‹¸ ğŸ’‹<br>2. åˆ®å¼€ä¸‹é¢çš„å¡ç‰‡ ğŸ‘‡</p>
    </header>

    <div class="scratch-container" id="scratch-box">
        <div class="secret-content" id="secret">
            <div class="secret-icon">ğŸ§´</div>
            <div class="secret-text">å¥–åŠ±ï¼šå…¨èº«ç²¾æ²¹SPA<br>(ç‹ç‹¸äº²è‡ªæœåŠ¡)</div>
        </div>
        <canvas id="scratch-canvas"></canvas>
    </div>

    <div class="kiss-layer" id="kiss-zone"></div>

    <div class="controls">
        <div class="score-display">è·å¾—äº²äº²ï¼š<span id="kiss-count">0</span> æ¬¡</div>
        <button class="btn" onclick="resetCard()">æ¢ä¸€å¼ åˆ®åˆ®ä¹ ğŸ”„</button>
    </div>

    <script>
        // --- æ¸¸æˆ 1ï¼šç‹‚å»ç‹ç‹¸ (Clicker) ---
        const kissZone = document.getElementById('kiss-zone');
        const countSpan = document.getElementById('kiss-count');
        let kissCount = 0;

        kissZone.addEventListener('pointerdown', (e) => {
            // å¢åŠ è®¡æ•°
            kissCount++;
            countSpan.innerText = kissCount;
            
            // éœ‡åŠ¨åé¦ˆ (å¦‚æœè®¾å¤‡æ”¯æŒ)
            if(navigator.vibrate) navigator.vibrate(30);

            // åˆ›å»ºå”‡å°
            const kiss = document.createElement('div');
            kiss.innerText = ['ğŸ’‹', 'ğŸ‘„', 'ğŸ’—', 'ğŸ¦Š'][Math.floor(Math.random()*4)];
            kiss.classList.add('kiss-mark');
            kiss.style.left = (e.clientX - 20) + 'px';
            kiss.style.top = (e.clientY - 20) + 'px';
            // éšæœºæ—‹è½¬
            const rot = Math.random() * 60 - 30;
            kiss.style.transform = `rotate(${rot}deg)`;
            
            document.body.appendChild(kiss);

            // 1ç§’åæ¶ˆå¤±
            setTimeout(() => kiss.remove(), 1000);
        });

        // --- æ¸¸æˆ 2ï¼šåˆ®åˆ®ä¹ (Canvas) ---
        const canvas = document.getElementById('scratch-canvas');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('scratch-box');
        const secretDiv = document.getElementById('secret');
        
        let isDrawing = false;

        // å¥–å“æ± 
        const prizes = [
            { icon: "ğŸ’³", text: "Lençš„å‰¯å¡éšä¾¿åˆ·" },
            { icon: "ğŸ›", text: "ä»Šæ™šé¸³é¸¯æµ´ (æ“èƒŒ)" },
            { icon: "ğŸ¦µ", text: "åšä½ çš„äººè‚‰é å«" },
            { icon: "ğŸ¦", text: "å–‚ä½ åƒå†°æ¿€å‡Œ" },
            { icon: "ğŸ”", text: "è§£é”ä»»æ„å§¿åŠ¿ x1" },
            { icon: "ğŸ¦Š", text: "ç‹ç‹¸å¬è¯ä¸€æ•´å¤©" }
        ];

        function initCanvas() {
            canvas.width = 300;
            canvas.height = 150;
            
            // å¡«å……ç°è‰²æ¶‚å±‚
            ctx.fillStyle = '#cccccc';
            ctx.fillRect(0, 0, 300, 150);
            
            // æ¶‚å±‚ä¸Šçš„æ–‡å­—
            ctx.font = '20px Microsoft YaHei';
            ctx.fillStyle = '#666666';
            ctx.textAlign = 'center';
            ctx.fillText('ç”¨æ‰‹åˆ®å¼€è¿™é‡Œ ğŸ’…', 150, 80);
            
            // éšæœºæ¢ä¸€ä¸ªå¥–å“
            const p = prizes[Math.floor(Math.random() * prizes.length)];
            secretDiv.innerHTML = `<div class="secret-icon">${p.icon}</div><div class="secret-text">${p.text}</div>`;
        }

        // åˆ®å¼€é€»è¾‘
        function scratch(x, y) {
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath();
            ctx.arc(x, y, 20, 0, Math.PI * 2); // ç¬”è§¦å¤§å°
            ctx.fill();
        }

        // é¼ æ ‡/è§¦æ‘¸äº‹ä»¶ç›‘å¬
        ['mousedown', 'touchstart'].forEach(evt => {
            canvas.addEventListener(evt, (e) => {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                scratch(clientX - rect.left, clientY - rect.top);
            });
        });

        ['mousemove', 'touchmove'].forEach(evt => {
            canvas.addEventListener(evt, (e) => {
                if (!isDrawing) return;
                e.preventDefault(); // é˜²æ­¢åˆ®çš„æ—¶å€™é¡µé¢æ»šåŠ¨
                const rect = canvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                scratch(clientX - rect.left, clientY - rect.top);
            });
        });

        ['mouseup', 'touchend'].forEach(evt => {
            canvas.addEventListener(evt, () => isDrawing = false);
        });

        function resetCard() {
            initCanvas();
        }

        // åˆå§‹åŒ–
        initCanvas();

    </script>
</body>
</html>
